{
	"info": {
		"_postman_id": "nexora001-complete-collection",
		"name": "Nexora001 API - Complete Test Suite",
		"description": "Complete API test collection for Nexora001 AI-Powered Knowledge Base deployed on 46.250.244.245",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"variable": [
		{
			"key": "base_url",
			"value": "http://46.250.244.245:8000",
			"type": "string"
		},
		{
			"key": "access_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "api_key",
			"value": "",
			"type": "string"
		},
		{
			"key": "user_email",
			"value": "test@example.com",
			"type": "string"
		},
		{
			"key": "user_password",
			"value": "testpassword123",
			"type": "string"
		},
		{
			"key": "job_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "doc_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "notification_id",
			"value": "",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "Root",
			"item": [
				{
					"name": "Get API Info",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/",
							"host": ["{{base_url}}"],
							"path": [""]
						},
						"description": "Get basic API information and available endpoints"
					},
					"response": []
				}
			]
		},
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Register New User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    pm.environment.set('user_id', response.user_id);",
									"    pm.collectionVariables.set('user_id', response.user_id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"{{user_email}}\",\n    \"password\": \"{{user_password}}\",\n    \"name\": \"Test User\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/register",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "register"]
						},
						"description": "Register a new client account"
					},
					"response": []
				},
				{
					"name": "Login (Get Access Token)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    pm.collectionVariables.set('access_token', response.access_token);",
									"    pm.environment.set('access_token', response.access_token);",
									"    console.log('Access token saved:', response.access_token);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/x-www-form-urlencoded"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "username",
									"value": "{{user_email}}",
									"type": "text"
								},
								{
									"key": "password",
									"value": "{{user_password}}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "login"]
						},
						"description": "Login and get Bearer token for authentication"
					},
					"response": []
				},
				{
					"name": "Get Current User Profile",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/auth/me",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "me"]
						},
						"description": "Get current user profile information"
					},
					"response": []
				},
				{
					"name": "Update User Profile",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Updated Test User\",\n    \"email\": \"{{user_email}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/me",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "me"]
						},
						"description": "Update user profile details"
					},
					"response": []
				},
				{
					"name": "Generate API Key",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    pm.collectionVariables.set('api_key', response.key);",
									"    pm.environment.set('api_key', response.key);",
									"    console.log('API Key saved:', response.key);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/auth/api-key",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "api-key"]
						},
						"description": "Generate or retrieve Widget API Key"
					},
					"response": []
				},
				{
					"name": "Change Password",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"new_password\": \"newpassword123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/password",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "password"]
						},
						"description": "Change user password"
					},
					"response": []
				}
			]
		},
		{
			"name": "Chat",
			"item": [
				{
					"name": "Chat (Dashboard - JWT Auth)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"message\": \"What is machine learning?\",\n    \"session_id\": \"test-session-001\",\n    \"use_history\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/chat/",
							"host": ["{{base_url}}"],
							"path": ["api", "chat", ""]
						},
						"description": "Ask a question using JWT authentication (Dashboard)"
					},
					"response": []
				},
				{
					"name": "Chat (Widget - API Key Auth)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-API-Key",
								"value": "{{api_key}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"message\": \"What is artificial intelligence?\",\n    \"session_id\": \"widget-visitor-001\",\n    \"use_history\": false\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/chat/widget",
							"host": ["{{base_url}}"],
							"path": ["api", "chat", "widget"]
						},
						"description": "Ask a question using API Key authentication (Public Widget)"
					},
					"response": []
				},
				{
					"name": "Get Conversation History",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/chat/history",
							"host": ["{{base_url}}"],
							"path": ["api", "chat", "history"]
						},
						"description": "Retrieve conversation history"
					},
					"response": []
				},
				{
					"name": "Clear Conversation History",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/chat/clear-history",
							"host": ["{{base_url}}"],
							"path": ["api", "chat", "clear-history"]
						},
						"description": "Clear conversation history for fresh start"
					},
					"response": []
				}
			]
		},
		{
			"name": "Ingestion",
			"item": [
				{
					"name": "Crawl Website URL",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    pm.collectionVariables.set('job_id', response.job_id);",
									"    pm.environment.set('job_id', response.job_id);",
									"    console.log('Job ID saved:', response.job_id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"url\": \"https://en.wikipedia.org/wiki/Machine_learning\",\n    \"max_depth\": 1,\n    \"follow_links\": false,\n    \"use_playwright\": false\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/ingest/url",
							"host": ["{{base_url}}"],
							"path": ["api", "ingest", "url"]
						},
						"description": "Submit a URL for crawling and indexing"
					},
					"response": []
				},
				{
					"name": "Get Crawl Job Status",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/ingest/url/{{job_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "ingest", "url", "{{job_id}}"]
						},
						"description": "Check the status of a crawl job"
					},
					"response": []
				},
				{
					"name": "Get User Crawl Jobs",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/ingest/jobs?limit=20&skip=0",
							"host": ["{{base_url}}"],
							"path": ["api", "ingest", "jobs"],
							"query": [
								{
									"key": "limit",
									"value": "20"
								},
								{
									"key": "skip",
									"value": "0"
								}
							]
						},
						"description": "Retrieve crawl job history for logged-in user"
					},
					"response": []
				},
				{
					"name": "Upload PDF File",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "/path/to/your/document.pdf",
									"description": "Select a PDF file to upload"
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/ingest/file",
							"host": ["{{base_url}}"],
							"path": ["api", "ingest", "file"]
						},
						"description": "Upload and process a PDF file"
					},
					"response": []
				},
				{
					"name": "Upload DOCX File",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "/path/to/your/document.docx",
									"description": "Select a DOCX file to upload"
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/ingest/file",
							"host": ["{{base_url}}"],
							"path": ["api", "ingest", "file"]
						},
						"description": "Upload and process a Word document"
					},
					"response": []
				}
			]
		},
		{
			"name": "System",
			"item": [
				{
					"name": "Get System Status",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/status",
							"host": ["{{base_url}}"],
							"path": ["api", "status"]
						},
						"description": "Get current system status and statistics"
					},
					"response": []
				},
				{
					"name": "List Documents",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.documents && response.documents.length > 0) {",
									"        pm.collectionVariables.set('doc_id', response.documents[0].id);",
									"        pm.environment.set('doc_id', response.documents[0].id);",
									"        console.log('Document ID saved:', response.documents[0].id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/documents?page=1&page_size=20",
							"host": ["{{base_url}}"],
							"path": ["api", "documents"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "page_size",
									"value": "20"
								},
								{
									"key": "source_type",
									"value": "web",
									"disabled": true
								}
							]
						},
						"description": "Get paginated list of indexed documents"
					},
					"response": []
				},
				{
					"name": "Get Document Statistics",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/documents/stats",
							"host": ["{{base_url}}"],
							"path": ["api", "documents", "stats"]
						},
						"description": "Get detailed statistics about indexed documents"
					},
					"response": []
				},
				{
					"name": "Delete Document by ID",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/documents?doc_id={{doc_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "documents"],
							"query": [
								{
									"key": "doc_id",
									"value": "{{doc_id}}"
								}
							]
						},
						"description": "Delete a single document by its ID"
					},
					"response": []
				},
				{
					"name": "Delete Documents by Source URL",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/documents/by-source?source_url=https://example.com",
							"host": ["{{base_url}}"],
							"path": ["api", "documents", "by-source"],
							"query": [
								{
									"key": "source_url",
									"value": "https://example.com"
								}
							]
						},
						"description": "Delete all documents from a specific source URL"
					},
					"response": []
				},
				{
					"name": "Delete All Documents (DANGER)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/documents/all?confirm=true",
							"host": ["{{base_url}}"],
							"path": ["api", "documents", "all"],
							"query": [
								{
									"key": "confirm",
									"value": "true"
								}
							]
						},
						"description": "⚠️ WARNING: Delete ALL user documents"
					},
					"response": []
				}
			]
		},
		{
			"name": "Notifications",
			"item": [
				{
					"name": "Get My Notifications",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.length > 0) {",
									"        pm.collectionVariables.set('notification_id', response[0].id);",
									"        pm.environment.set('notification_id', response[0].id);",
									"        console.log('Notification ID saved:', response[0].id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/notifications/",
							"host": ["{{base_url}}"],
							"path": ["api", "notifications", ""]
						},
						"description": "Get all notifications for current user"
					},
					"response": []
				},
				{
					"name": "Mark Notification as Read",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/notifications/{{notification_id}}/read",
							"host": ["{{base_url}}"],
							"path": ["api", "notifications", "{{notification_id}}", "read"]
						},
						"description": "Mark a notification as read"
					},
					"response": []
				}
			]
		},
		{
			"name": "Admin (Super Admin Only)",
			"item": [
				{
					"name": "List All Users",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/users",
							"host": ["{{base_url}}"],
							"path": ["api", "admin", "users"]
						},
						"description": "Super Admin: List all registered clients with statistics"
					},
					"response": []
				},
				{
					"name": "Create User Manually",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"newclient@example.com\",\n    \"name\": \"New Client\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/client",
							"host": ["{{base_url}}"],
							"path": ["api", "admin", "client"]
						},
						"description": "Super Admin: Create a client manually with temporary password"
					},
					"response": []
				},
				{
					"name": "Ban User",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"user@example.com\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/ban",
							"host": ["{{base_url}}"],
							"path": ["api", "admin", "ban"]
						},
						"description": "Super Admin: Ban a client account"
					},
					"response": []
				},
				{
					"name": "Unban User",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"user@example.com\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/unban",
							"host": ["{{base_url}}"],
							"path": ["api", "admin", "unban"]
						},
						"description": "Super Admin: Unban a client account"
					},
					"response": []
				},
				{
					"name": "Delete Client Permanently",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/client?email=user@example.com",
							"host": ["{{base_url}}"],
							"path": ["api", "admin", "client"],
							"query": [
								{
									"key": "email",
									"value": "user@example.com"
								}
							]
						},
						"description": "Super Admin: Permanently delete a client and all their data"
					},
					"response": []
				},
				{
					"name": "Send Notification to User",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"user@example.com\",\n    \"message\": \"This is a system notification from admin\",\n    \"type\": \"info\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/notify",
							"host": ["{{base_url}}"],
							"path": ["api", "admin", "notify"]
						},
						"description": "Super Admin: Send an internal message to a client"
					},
					"response": []
				}
			]
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{access_token}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	]
}
